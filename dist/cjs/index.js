var MappingRenderer=function(e,t,r,n,a){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=o(t);const l=({source:e,targetEnum:r,onChange:n})=>{const[o,l]=t.useState("");return i.default.createElement("div",{style:{display:"flex",marginBottom:"20px"}},i.default.createElement(a.TextField,{label:e?.label||e.value,variant:"outlined","aria-readonly":"true",disabled:!0,style:{marginRight:"40px",width:"100%"}}),i.default.createElement(a.FormControl,{variant:"outlined",style:{width:"100%"}},i.default.createElement(a.InputLabel,null,"Select a Property"),i.default.createElement(a.Select,{label:"Select a Property",value:o,onChange:t=>{l(t.target.value);const a=r.find((e=>e.value===t.target.value));a&&n(e.value,a)}},r.map((e=>i.default.createElement(a.MenuItem,{key:e.value,value:e.value},e?.label||e.value))))))},s={tester:n.rankWith(3,n.and(n.uiTypeIs("Dynamic"))),renderer:r.withJsonFormsControlProps((({data:e,handleChange:t,path:r,...n})=>{const a=n.schema,o=(n,a)=>{const o=e.findIndex((e=>e.source.value===n));e[o]={...e[o],target:a},t(r,e)};return i.default.createElement("div",{style:{width:"1100px",margin:"0 auto"}},i.default.createElement("div",{style:{display:"flex"}},i.default.createElement("h2",{style:{marginRight:"auto"}},a.items.properties.source.title),i.default.createElement("h2",null,a.items.properties.target.title)),a.items.properties.source.enum.map((e=>i.default.createElement(l,{key:e.value,source:e,targetEnum:a.items.properties.target.enum,onChange:o}))))}))};function c(e,t){var r,n;if("function"==typeof t)void 0!==(n=t(e))&&(e=n);else if(Array.isArray(t))for(r=0;r<t.length;r++)void 0!==(n=t[r](e))&&(e=n);return e}function u(e,t){return"-"===e[0]&&Array.isArray(t)&&/^-\d+$/.test(e)?t.length+parseInt(e,10):e}function p(e){return"[object Object]"===Object.prototype.toString.call(e)}function f(e){return Object(e)===e}function d(e){return 0===Object.keys(e).length}var y=["__proto__","prototype","constructor"],h=function(e){return-1===y.indexOf(e)};function m(e,t){e.indexOf("[")>=0&&(e=e.replace(/\[/g,t).replace(/]/g,""));var r=e.split(t);if(r.filter(h).length!==r.length)throw Error("Refusing to update blacklisted property "+e);return r}var v=Object.prototype.hasOwnProperty;function b(e,t,r,n){if(!(this instanceof b))return new b(e,t,r,n);void 0===t&&(t=!1),void 0===r&&(r=!0),void 0===n&&(n=!0),this.separator=e||".",this.override=t,this.useArray=r,this.useBrackets=n,this.keepArray=!1,this.cleanup=[]}var g=new b(".",!1,!0,!0);function k(e){return function(){return g[e].apply(g,arguments)}}b.prototype._fill=function(e,t,r,n){var a=e.shift();if(e.length>0){if(t[a]=t[a]||(this.useArray&&function(e){return/^\d+$/.test(e)}(e[0])?[]:{}),!f(t[a])){if(!this.override){if(!f(r)||!d(r))throw new Error("Trying to redefine `"+a+"` which is a "+typeof t[a]);return}t[a]={}}this._fill(e,t[a],r,n)}else{if(!this.override&&f(t[a])&&!d(t[a])){if(!f(r)||!d(r))throw new Error("Trying to redefine non-empty obj['"+a+"']");return}t[a]=c(r,n)}},b.prototype.object=function(e,t){var r=this;return Object.keys(e).forEach((function(n){var a=void 0===t?null:t[n],o=m(n,r.separator).join(r.separator);-1!==o.indexOf(r.separator)?(r._fill(o.split(r.separator),e,e[n],a),delete e[n]):e[n]=c(e[n],a)})),e},b.prototype.str=function(e,t,r,n){var a=m(e,this.separator).join(this.separator);return-1!==e.indexOf(this.separator)?this._fill(a.split(this.separator),r,t,n):r[e]=c(t,n),r},b.prototype.pick=function(e,t,r,n){var a,o,i,l,s;for(o=m(e,this.separator),a=0;a<o.length;a++){if(l=u(o[a],t),!t||"object"!=typeof t||!(l in t))return;if(a===o.length-1)return r?(i=t[l],n&&Array.isArray(t)?t.splice(l,1):delete t[l],Array.isArray(t)&&(s=o.slice(0,-1).join("."),-1===this.cleanup.indexOf(s)&&this.cleanup.push(s)),i):t[l];t=t[l]}return r&&Array.isArray(t)&&(t=t.filter((function(e){return void 0!==e}))),t},b.prototype.delete=function(e,t){return this.remove(e,t,!0)},b.prototype.remove=function(e,t,r){var n;if(this.cleanup=[],Array.isArray(e)){for(n=0;n<e.length;n++)this.pick(e[n],t,!0,r);return r||this._cleanup(t),t}return this.pick(e,t,!0,r)},b.prototype._cleanup=function(e){var t,r,n,a;if(this.cleanup.length){for(r=0;r<this.cleanup.length;r++)t=(t=(a=(n=this.cleanup[r].split(".")).splice(0,-1).join("."))?this.pick(a,e):e)[n[0]].filter((function(e){return void 0!==e})),this.set(this.cleanup[r],t,e);this.cleanup=[]}},b.prototype.del=b.prototype.remove,b.prototype.move=function(e,t,r,n,a){return"function"==typeof n||Array.isArray(n)?this.set(t,c(this.pick(e,r,!0),n),r,a):(a=n,this.set(t,this.pick(e,r,!0),r,a)),r},b.prototype.transfer=function(e,t,r,n,a,o){return"function"==typeof a||Array.isArray(a)?this.set(t,c(this.pick(e,r,!0),a),n,o):(o=a,this.set(t,this.pick(e,r,!0),n,o)),n},b.prototype.copy=function(e,t,r,n,a,o){return"function"==typeof a||Array.isArray(a)?this.set(t,c(JSON.parse(JSON.stringify(this.pick(e,r,!1))),a),n,o):(o=a,this.set(t,this.pick(e,r,!1),n,o)),n},b.prototype.set=function(e,t,r,n){var a,o,i,l;if(void 0===t)return r;for(i=m(e,this.separator),a=0;a<i.length;a++){if(l=i[a],a===i.length-1)if(n&&p(t)&&p(r[l]))for(o in t)v.call(t,o)&&(r[l][o]=t[o]);else if(n&&Array.isArray(r[l])&&Array.isArray(t))for(var s=0;s<t.length;s++)r[i[a]].push(t[s]);else r[l]=t;else v.call(r,l)&&(p(r[l])||Array.isArray(r[l]))||(/^\d+$/.test(i[a+1])?r[l]=[]:r[l]={});r=r[l]}return r},b.prototype.transform=function(e,t,r){return t=t||{},r=r||{},Object.keys(e).forEach(function(n){this.set(e[n],this.pick(n,t),r)}.bind(this)),r},b.prototype.dot=function(e,t,r){t=t||{},r=r||[];var n=Array.isArray(e);return Object.keys(e).forEach(function(a){var o=n&&this.useBrackets?"["+a+"]":a;if(f(e[a])&&(p(e[a])&&!d(e[a])||Array.isArray(e[a])&&!this.keepArray&&0!==e[a].length)){if(n&&this.useBrackets){var i=r[r.length-1]||"";return this.dot(e[a],t,r.slice(0,-1).concat(i+o))}return this.dot(e[a],t,r.concat(o))}n&&this.useBrackets?t[r.join(this.separator).concat("["+a+"]")]=e[a]:t[r.concat(o).join(this.separator)]=e[a]}.bind(this)),t},b.pick=k("pick"),b.move=k("move"),b.transfer=k("transfer"),b.transform=k("transform"),b.copy=k("copy"),b.object=k("object"),b.str=k("str"),b.set=k("set"),b.delete=k("delete"),b.del=b.remove=k("remove"),b.dot=k("dot"),["override","overwrite"].forEach((function(e){Object.defineProperty(b,e,{get:function(){return g.override},set:function(e){g.override=!!e}})})),["useArray","keepArray","useBrackets"].forEach((function(e){Object.defineProperty(b,e,{get:function(){return g[e]},set:function(t){g[e]=t}})})),b._process=c;var E=b;const j={tester:n.rankWith(3,n.and(n.uiTypeIs("SourceTable"))),renderer:r.withJsonFormsControlProps((({data:e})=>{const r=t.useMemo((()=>E.dot(e)),[e]);return i.default.createElement("div",{style:{width:"1100px",margin:"0 auto"}},i.default.createElement("h2",{style:{width:"max-content"}},"Source Data"),i.default.createElement(a.TableContainer,{component:a.Paper},i.default.createElement(a.Table,null,i.default.createElement(a.TableHead,null,i.default.createElement(a.TableRow,null,Object.keys(r).map((e=>i.default.createElement(a.TableCell,{style:{fontWeight:600},key:e},e))))),i.default.createElement(a.TableBody,null,i.default.createElement(a.TableRow,null,Object.keys(r).map((t=>i.default.createElement(a.TableCell,{key:t},E.pick(t,e)))))))))}))},A=e=>{const t=[];return Object.keys(E.dot(e.properties)).forEach((r=>{const n=(e=>{const t=e.replaceAll("properties.","").split(".");return t.slice(0,t.length-1).join(".")})(r),a=r.split("."),o=a.slice(0,a.length-1).join("."),i=E.pick(o,e.properties),l={value:n,...i};t.find((e=>e.value===n))||t.push(l)})),t},T=(e,t)=>{let r=null;return Object.keys(E.dot(e)).forEach((n=>{if(n.includes("type")&&E.pick(n,e)===t){const t=n.replace("type","scope"),a=E.pick(t,e).split("/"),o=a[a.length-1];r=o}})),r},O=e=>{if(e.baseKeys.dynamicObjectKey)return e[e.baseKeys.dynamicObjectKey].reduce(((e,{source:t,target:r})=>r?.value?(e[t.value]=r.value,e):e),{})},w=(e,t)=>{const r=O(e);return E.transform(E.dot(r),t)};var C=Object.freeze({__proto__:null,createSchema:({source:e,target:t,uischema:r,dataToTransform:n})=>{const a=T(r,"Dynamic"),o=T(r,"SourceTable"),i=T(r,"TransformedTable"),l=A(e),s=A(t);return{schema:{type:"object",properties:{[a]:{type:"array",items:{type:"object",required:["target"],properties:{source:{type:"object",title:e?.title,enum:l},target:{type:"object",title:t?.title,enum:s}}}},...o&&{[o]:{type:"object"}},...i&&{[i]:{type:"object"}}}},data:{[a]:l.map((e=>({source:e}))),[o]:n,[i]:n,baseKeys:{dynamicObjectKey:a}}}},createRecipe:O,transformData:w});const _={tester:n.rankWith(3,n.and(n.uiTypeIs("TransformedTable"))),renderer:r.withJsonFormsControlProps((({data:e})=>{const n=r.useJsonForms(),o=t.useMemo((()=>w(n.core.data,e)||[]),[n.core.data,e]);return i.default.createElement("div",{style:{width:"1100px",margin:"0 auto"}},Object.keys(o||[]).length>0&&i.default.createElement(i.default.Fragment,null,i.default.createElement("h2",{style:{width:"max-content"}},"Transformed Data"),i.default.createElement(a.TableContainer,{component:a.Paper},i.default.createElement(a.Table,null,i.default.createElement(a.TableHead,null,i.default.createElement(a.TableRow,null,Object.keys(E.dot(o)).map((e=>i.default.createElement(a.TableCell,{style:{fontWeight:600},key:e},e))))),i.default.createElement(a.TableBody,null,i.default.createElement(a.TableRow,null,Object.keys(E.dot(o)).map((e=>i.default.createElement(a.TableCell,{key:e},JSON.stringify(E.pick(e,o)))))))))))}))};return e.MappingRendererControl=s,e.SourceTableControl=j,e.TransformedTableControl=_,e.session=C,Object.defineProperty(e,"__esModule",{value:!0}),e}({},React,JSONFormsReact,JSONFormsCore,MaterialUI);
