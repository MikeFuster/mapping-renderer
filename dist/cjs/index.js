var MappingRenderer=function(e,t,r,n,a){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=i(t);const l=({source:e,targetEnum:r,onChange:n})=>{const[i,l]=t.useState("");return o.default.createElement("div",{style:{display:"flex",marginBottom:"20px"}},o.default.createElement(a.TextField,{label:e?.label||e.value,variant:"outlined","aria-readonly":"true",disabled:!0,style:{marginRight:"40px",width:"100%"}}),o.default.createElement(a.FormControl,{variant:"outlined",style:{width:"100%"}},o.default.createElement(a.InputLabel,null,"Select a Property"),o.default.createElement(a.Select,{label:"Select a Property",value:i,onChange:t=>{l(t.target.value);const a=r.find((e=>e.value===t.target.value));a&&n(e.value,a)}},r.map((e=>o.default.createElement(a.MenuItem,{key:e.value,value:e.value},e?.label||e.value))))))};function s(e,t){var r,n;if("function"==typeof t)void 0!==(n=t(e))&&(e=n);else if(Array.isArray(t))for(r=0;r<t.length;r++)void 0!==(n=t[r](e))&&(e=n);return e}function u(e,t){return"-"===e[0]&&Array.isArray(t)&&/^-\d+$/.test(e)?t.length+parseInt(e,10):e}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function p(e){return Object(e)===e}function f(e){return 0===Object.keys(e).length}var d=["__proto__","prototype","constructor"],h=function(e){return-1===d.indexOf(e)};function y(e,t){e.indexOf("[")>=0&&(e=e.replace(/\[/g,t).replace(/]/g,""));var r=e.split(t);if(r.filter(h).length!==r.length)throw Error("Refusing to update blacklisted property "+e);return r}var m=Object.prototype.hasOwnProperty;function v(e,t,r,n){if(!(this instanceof v))return new v(e,t,r,n);void 0===t&&(t=!1),void 0===r&&(r=!0),void 0===n&&(n=!0),this.separator=e||".",this.override=t,this.useArray=r,this.useBrackets=n,this.keepArray=!1,this.cleanup=[]}var g=new v(".",!1,!0,!0);function b(e){return function(){return g[e].apply(g,arguments)}}v.prototype._fill=function(e,t,r,n){var a=e.shift();if(e.length>0){if(t[a]=t[a]||(this.useArray&&function(e){return/^\d+$/.test(e)}(e[0])?[]:{}),!p(t[a])){if(!this.override){if(!p(r)||!f(r))throw new Error("Trying to redefine `"+a+"` which is a "+typeof t[a]);return}t[a]={}}this._fill(e,t[a],r,n)}else{if(!this.override&&p(t[a])&&!f(t[a])){if(!p(r)||!f(r))throw new Error("Trying to redefine non-empty obj['"+a+"']");return}t[a]=s(r,n)}},v.prototype.object=function(e,t){var r=this;return Object.keys(e).forEach((function(n){var a=void 0===t?null:t[n],i=y(n,r.separator).join(r.separator);-1!==i.indexOf(r.separator)?(r._fill(i.split(r.separator),e,e[n],a),delete e[n]):e[n]=s(e[n],a)})),e},v.prototype.str=function(e,t,r,n){var a=y(e,this.separator).join(this.separator);return-1!==e.indexOf(this.separator)?this._fill(a.split(this.separator),r,t,n):r[e]=s(t,n),r},v.prototype.pick=function(e,t,r,n){var a,i,o,l,s;for(i=y(e,this.separator),a=0;a<i.length;a++){if(l=u(i[a],t),!t||"object"!=typeof t||!(l in t))return;if(a===i.length-1)return r?(o=t[l],n&&Array.isArray(t)?t.splice(l,1):delete t[l],Array.isArray(t)&&(s=i.slice(0,-1).join("."),-1===this.cleanup.indexOf(s)&&this.cleanup.push(s)),o):t[l];t=t[l]}return r&&Array.isArray(t)&&(t=t.filter((function(e){return void 0!==e}))),t},v.prototype.delete=function(e,t){return this.remove(e,t,!0)},v.prototype.remove=function(e,t,r){var n;if(this.cleanup=[],Array.isArray(e)){for(n=0;n<e.length;n++)this.pick(e[n],t,!0,r);return r||this._cleanup(t),t}return this.pick(e,t,!0,r)},v.prototype._cleanup=function(e){var t,r,n,a;if(this.cleanup.length){for(r=0;r<this.cleanup.length;r++)t=(t=(a=(n=this.cleanup[r].split(".")).splice(0,-1).join("."))?this.pick(a,e):e)[n[0]].filter((function(e){return void 0!==e})),this.set(this.cleanup[r],t,e);this.cleanup=[]}},v.prototype.del=v.prototype.remove,v.prototype.move=function(e,t,r,n,a){return"function"==typeof n||Array.isArray(n)?this.set(t,s(this.pick(e,r,!0),n),r,a):(a=n,this.set(t,this.pick(e,r,!0),r,a)),r},v.prototype.transfer=function(e,t,r,n,a,i){return"function"==typeof a||Array.isArray(a)?this.set(t,s(this.pick(e,r,!0),a),n,i):(i=a,this.set(t,this.pick(e,r,!0),n,i)),n},v.prototype.copy=function(e,t,r,n,a,i){return"function"==typeof a||Array.isArray(a)?this.set(t,s(JSON.parse(JSON.stringify(this.pick(e,r,!1))),a),n,i):(i=a,this.set(t,this.pick(e,r,!1),n,i)),n},v.prototype.set=function(e,t,r,n){var a,i,o,l;if(void 0===t)return r;for(o=y(e,this.separator),a=0;a<o.length;a++){if(l=o[a],a===o.length-1)if(n&&c(t)&&c(r[l]))for(i in t)m.call(t,i)&&(r[l][i]=t[i]);else if(n&&Array.isArray(r[l])&&Array.isArray(t))for(var s=0;s<t.length;s++)r[o[a]].push(t[s]);else r[l]=t;else m.call(r,l)&&(c(r[l])||Array.isArray(r[l]))||(/^\d+$/.test(o[a+1])?r[l]=[]:r[l]={});r=r[l]}return r},v.prototype.transform=function(e,t,r){return t=t||{},r=r||{},Object.keys(e).forEach(function(n){this.set(e[n],this.pick(n,t),r)}.bind(this)),r},v.prototype.dot=function(e,t,r){t=t||{},r=r||[];var n=Array.isArray(e);return Object.keys(e).forEach(function(a){var i=n&&this.useBrackets?"["+a+"]":a;if(p(e[a])&&(c(e[a])&&!f(e[a])||Array.isArray(e[a])&&!this.keepArray&&0!==e[a].length)){if(n&&this.useBrackets){var o=r[r.length-1]||"";return this.dot(e[a],t,r.slice(0,-1).concat(o+i))}return this.dot(e[a],t,r.concat(i))}n&&this.useBrackets?t[r.join(this.separator).concat("["+a+"]")]=e[a]:t[r.concat(i).join(this.separator)]=e[a]}.bind(this)),t},v.pick=b("pick"),v.move=b("move"),v.transfer=b("transfer"),v.transform=b("transform"),v.copy=b("copy"),v.object=b("object"),v.str=b("str"),v.set=b("set"),v.delete=b("delete"),v.del=v.remove=b("remove"),v.dot=b("dot"),["override","overwrite"].forEach((function(e){Object.defineProperty(v,e,{get:function(){return g.override},set:function(e){g.override=!!e}})})),["useArray","keepArray","useBrackets"].forEach((function(e){Object.defineProperty(v,e,{get:function(){return g[e]},set:function(t){g[e]=t}})})),v._process=s;var k=v;const E=n.rankWith(3,n.and(n.uiTypeIs("Dynamic"))),A=r.withJsonFormsControlProps((({data:e,handleChange:r,path:n,...i})=>{const[s,u]=t.useState({}),c=i.schema,p=i.rootSchema,f=(t,a)=>{const i=e.findIndex((e=>e.source.value===t));e[i]={...e[i],target:a},r(n,e);const o=(e=>e.keys.reduce(((e,{source:t,target:r})=>(e[t.value]=r.value,e)),{}))({keys:e});u(o)},d=t.useMemo((()=>k.dot(p.properties.dataToTransform)),[p]),h=t.useMemo((()=>k.transform(k.dot(s),p.properties.dataToTransform)),[s,p]);return o.default.createElement("div",{style:{width:"1100px",margin:"0 auto"}},o.default.createElement("h2",{style:{width:"max-content"}},"Base Table"),o.default.createElement(a.TableContainer,{component:a.Paper},o.default.createElement(a.Table,null,o.default.createElement(a.TableHead,null,o.default.createElement(a.TableRow,null,Object.keys(d).map((e=>o.default.createElement(a.TableCell,{style:{fontWeight:600},key:e},e))))),o.default.createElement(a.TableBody,null,o.default.createElement(a.TableRow,null,Object.keys(d).map((e=>o.default.createElement(a.TableCell,{key:e},k.pick(e,p.properties.dataToTransform)))))))),Object.keys(h).length>0&&o.default.createElement(o.default.Fragment,null,o.default.createElement("h2",{style:{width:"max-content"}},"Transformed Table"),o.default.createElement(a.TableContainer,{component:a.Paper},o.default.createElement(a.Table,null,o.default.createElement(a.TableHead,null,o.default.createElement(a.TableRow,null,Object.keys(k.dot(h)).map((e=>o.default.createElement(a.TableCell,{style:{fontWeight:600},key:e},e))))),o.default.createElement(a.TableBody,null,o.default.createElement(a.TableRow,null,Object.keys(h).map((e=>o.default.createElement(a.TableCell,{key:e},JSON.stringify(k.pick(e,h)))))))))),o.default.createElement("div",{style:{display:"flex"}},o.default.createElement("h2",{style:{marginRight:"auto"}},c.items.properties.source.title),o.default.createElement("h2",null,c.items.properties.target.title)),c.items.properties.source.enum.map((e=>o.default.createElement(l,{key:e.value,source:e,targetEnum:c.items.properties.target.enum,onChange:f}))))})),T={tester:E,renderer:A};return e.MappingRendererControl=T,e.MappingRendererControlRenderer=A,e.MappingRendererControlTester=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({},React,JSONFormsReact,JSONFormsCore,MaterialUI);
